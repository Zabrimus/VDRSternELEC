From 210287a824c328d0bd62e32155a7e9288d598783 Mon Sep 17 00:00:00 2001
From: Andreas Baierl <ichgeh@imkreisrum.de>
Date: Mon, 8 May 2023 16:07:06 +0200
Subject: [PATCH] Makefile

---
 Makefile | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

diff --git a/Makefile b/Makefile
index 364cd57..2c594c8 100644
--- a/Makefile
+++ b/Makefile
@@ -8,12 +8,11 @@
 #/******************************************************************************
 # * if you prefer verbose non-coloured build messages, remove the '@' here:
 # *****************************************************************************/
-CC  = @gcc
-CXX = @g++
+CC  = $(CXX)
 
           
 PWD = $(shell pwd)
-PLUGIN = $(shell basename $(PWD) | cut -d- -f1)
+PLUGIN = wirbelscan
 CPPSRC = $(wildcard *.cpp)
 OBJS   = $(CPPSRC:%.cpp=%.o)
 LDFLAGS?=
@@ -42,7 +41,7 @@ VERSION = $(shell grep 'const char\* WIRBELSCAN_VERSION *= ' wirbelscan.cpp | aw
 ### The directory environment:
 # Use package data if installed...otherwise assume we're under the VDR source directory:
 PKGCFG = $(if $(VDRDIR),$(shell pkg-config --variable=$(1) $(VDRDIR)/vdr.pc),$(shell PKG_CONFIG_PATH="$$PKG_CONFIG_PATH:../../.." pkg-config --variable=$(1) vdr))
-LIBDIR = $(call PKGCFG,libdir)
+LIBDIR ?= $(call PKGCFG,libdir)
 LOCDIR = $(call PKGCFG,locdir)
 PLGCFG = $(call PKGCFG,plgcfg)
 
@@ -150,7 +149,7 @@ endif
 	$(CXX) $(CXXFLAGS) -shared $(OBJS) -o $@ $(LDFLAGS)
 
 install-lib: $(SOFILE)
-	install -D $^ $(DESTDIR)$(LIBDIR)/$^.$(APIVERSION)
+	install -D $^ $(LIBDIR)/$^.$(APIVERSION)
 
 install: install-lib install-i18n
 
-- 
2.30.2

